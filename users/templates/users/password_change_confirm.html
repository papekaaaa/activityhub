{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container mt-5" style="max-width: 700px;">
  <div class="card border-0 shadow-sm p-4" style="border-radius: 20px;">
    <h5 class="fw-bold mb-2">ยืนยันก่อนเปลี่ยนรหัสผ่าน</h5>
    <div class="text-muted small mb-3">
      กรุณากรอกรหัสผ่านปัจจุบันเพื่อยืนยันตัวตน (ขั้นตอนที่ 1/2)
    </div>

    <form method="POST">
      {% csrf_token %}

      <label class="form-label fw-semibold">รหัสผ่านปัจจุบัน</label>
      <div class="input-group mb-3">
        <input type="password" name="current_password" id="current_password" class="form-control"
               required style="border: 1.5px solid #ccc; border-radius: 10px; padding: 8px 10px; font-size: 15px;">
        <button class="btn btn-outline-secondary" type="button" id="toggleCurrentPwd" style="border-radius: 10px;">
          <i class="fa-regular fa-eye"></i>
        </button>
      </div>

      <div class="d-flex justify-content-center gap-2 mt-4">
        <a href="{% url 'profile_edit' %}" class="btn btn-outline-secondary px-4 py-2" style="border-radius: 20px;">
          ยกเลิก
        </a>
        <button class="btn px-5 py-2" style="background-color:#B9E6C9; border:none; border-radius:20px; font-weight:600; color:#000;">
          ยืนยัน
        </button>
      </div>
    </form>
  </div>
</div>

<script>
  const toggleBtn = document.getElementById('toggleCurrentPwd');
  const pwdInput  = document.getElementById('current_password');
  if (toggleBtn && pwdInput) {
    toggleBtn.addEventListener('click', () => {
      pwdInput.type = (pwdInput.type === 'password') ? 'text' : 'password';
    });
  }
</script>
{% endblock %}
